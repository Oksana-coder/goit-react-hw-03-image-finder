(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),s=a(10),i=a(4),l=a(5),h=a(7),u=a(6),m=a(8),d=a(11),j=a.n(d);var b={fetchImages:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("20958387-96a830a6962a2a719bbaccdc5","&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("There are no images corresponding to ".concat(e)))}))}},g=(a(36),a(1)),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchTerm:""},e.handleSearchTermChange=function(t){e.setState({searchTerm:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchTerm.trim()?(e.props.onSubmit(e.state.searchTerm),e.setState({searchTerm:""})):m.b.error("Enter your search query!")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(g.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"searchTerm",value:this.state.searchTerm,onChange:this.handleSearchTermChange})]})})}}]),a}(n.Component);a(38);function p(e){var t=e.tags,a=e.webformatURL,n=e.onShowLargeImage;return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{src:a,alt:t,className:"ImageGalleryItem-image",onClick:n})})}a(39);function O(e){var t=e.images,a=e.onShowLargeImage,n=function(e){a(e)};return Object(g.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.tags,r=e.webformatURL,c=e.largeImageURL;return Object(g.jsx)(p,{tags:a,webformatURL:r,onShowLargeImage:function(){return n(c)}},t)}))})}a(40);function v(e){var t=e.fetchImages;return Object(g.jsx)("button",{type:"button",className:"load-more-btn",onClick:t,children:"Load more"})}a(41);var x=document.querySelector("#modal-root"),S=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeydown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdrop=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(g.jsx)("div",{className:"Overlay",onClick:this.handleBackdrop,children:Object(g.jsx)("div",{className:"Modal",children:this.props.children})}),x)}}]),a}(n.Component),w=(a(42),function(e){var t=e.children;return Object(g.jsx)("div",{className:"Container",children:t})}),y=a.p+"static/media/error-image_640.8361ac15.jpeg";function I(e){var t=e.message;return Object(g.jsxs)("div",{role:"alert",children:[Object(g.jsx)("img",{src:y,width:"240",alt:"sad-emoji"}),Object(g.jsx)("p",{children:t})]})}a(43),a(44),a(45);var C="idle",T="pending",k="resolved",N="rejected",L=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchTerm:"",images:[],pageNumber:1,showModal:!1,largeImage:"",error:null,status:C},e.fetchImages=function(){var t=e.state,a=t.searchTerm,n=t.pageNumber;b.fetchImages(a,n).then((function(t){var a=t.hits;e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(a)),pageNumber:e.pageNumber+1,status:k}}))})).catch((function(t){return e.setState({error:t,status:N})}))},e.handleFormSubmit=function(t){e.setState({searchTerm:t,images:[],pageNumber:1,error:null})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.showLargeImage=function(t){e.setState({largeImage:t}),e.toggleModal()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchTerm!==this.state.searchTerm&&(this.setState({status:T}),this.fetchImages()),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.showModal,n=e.largeImage,r=e.status,c=e.error;return"idle"===r?Object(g.jsxs)(w,{children:[Object(g.jsx)(f,{onSubmit:this.handleFormSubmit}),Object(g.jsx)(m.a,{autoClose:3e3})]}):"pending"===r?Object(g.jsxs)(w,{children:[Object(g.jsx)(f,{onSubmit:this.handleFormSubmit}),Object(g.jsx)(j.a,{type:"Puff",color:"#00BFFF",height:100,width:100})]}):"rejected"===r?Object(g.jsxs)(w,{children:[Object(g.jsx)(f,{onSubmit:this.handleFormSubmit}),Object(g.jsx)(I,{message:c.message}),Object(g.jsx)(m.a,{autoClose:3e3})]}):"resolved"===r?Object(g.jsxs)(w,{children:[Object(g.jsx)(f,{onSubmit:this.handleFormSubmit}),Object(g.jsx)(O,{images:t,onShowLargeImage:this.showLargeImage}),t.length>0&&Object(g.jsx)(v,{fetchImages:this.fetchImages}),a&&Object(g.jsx)(S,{onClose:this.toggleModal,children:Object(g.jsx)("img",{src:n,alt:""})}),Object(g.jsx)(m.a,{autoClose:3e3})]}):void 0}}]),a}(n.Component);a(46),a(47);o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(L,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.e99eebd3.chunk.js.map